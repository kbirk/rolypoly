!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.rolypoly=e()}}(function(){return function e(t,n,o){function s(c,i){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!i&&a)return a(c,!0);if(r)return r(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};t[c][0].call(l.exports,function(e){var n=t[c][1][e];return s(n?n:e)},l,l.exports,e,t,n,o)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(e,t,n){!function(){"use strict";function n(e){e=e||256,this.buffer=new Array(e),this.length=e,this.index=0}var o=e("./Util");n.prototype.push=function(e){this.buffer[this.index]=e,this.index=(this.index+1)%this.length},n.prototype.back=function(e){return e=e?e:0,this.buffer[o.mod(this.index-1-e,this.length)]},t.exports=n}()},{"./Util":9}],2:[function(e,t,n){!function(){"use strict";t.exports={BACKSPACE:"backspace",TAB:"tab",ENTER:"enter",SHIFT:"shift",CTRL:"ctrl",ALT:"alt",PAUSE_BREAK:"pausebreak",CAPS_LOCK:"capslock",ESC:"esc",PAGE_UP:"pageup",PAGE_DOWN:"pagedown",END:"end",HOME:"home",LEFT_ARROW:"left",UP_ARROW:"up",RIGHT_ARROW:"right",DOWN_ARROW:"down",PRINT_SCREEN:"printscreen",INSERT:"insert",DELETE:"delete",WINDOWS:"windows",SELECT:"select",SPACE_BAR:"space",NUM_LOCK:"numlock",SCROLL_LOCK:"scrolllock"}}()},{}],3:[function(e,t,n){!function(){"use strict";var n=e("./KeyEnums");t.exports={8:n.BACKSPACE,9:n.TAB,13:n.ENTER,16:n.SHIFT,17:n.CTRL,18:n.ALT,19:n.PAUSE_BREAK,20:n.CAPS_LOCK,27:n.ESC,32:n.SPACE_BAR,33:n.PAGE_UP,34:n.PAGE_DOWN,35:n.END,36:n.HOME,37:n.LEFT_ARROW,38:n.UP_ARROW,39:n.RIGHT_ARROW,40:n.DOWN_ARROW,44:n.PRINT_SCREEN,45:n.INSERT,46:n.DELETE,48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:n.WINDOWS,92:n.WINDOWS,93:n.SELECT,96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:n.NUM_LOCK,145:n.SCROLL_LOCK,186:":",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}}()},{"./KeyEnums":2}],4:[function(e,t,n){!function(){"use strict";function n(e,t){var n=!1;return t.forEach(function(t){C[t]||(console.log("Argument '"+t+"' to '"+e+"' is not a recognized event type, command ignored."),n=!0)}),n}function o(e){return e.split(" ").length>1}function s(e){return e.split(" ")}function r(e){return e.length>1?e.split("+").length>1:!1}function c(e){var t=e.split(/\+\+\+|\+\+/),n=[];return t.length>1?t.forEach(function(e,o){0===e.length?0===o&&n.push("+"):(n=n.concat(e.split("+")),o!==t.length-1&&n.push("+"))}):n=e.split("+"),n}function i(e,t,o,r){var c,i=s(t),a=e.keys,u=e.sequences;n("Keyboard.on",i)||(u[t]=u[t]||{keys:i,lastKey:i[i.length-1],callbacks:{}},c=u[t].callbacks,o.forEach(function(e){c[e]=c[e]||[],c[e].push(r),i.forEach(function(n){var o=a[n]=a[n]||{};o.sequences=o.sequences||{},o.sequences[e]=o.sequences[e]||[],-1===o.sequences[e].indexOf(t)&&o.sequences[e].push(t)})}))}function a(e,t,n,o){var r=s(t),c=e.keys,i=e.sequences,a=i[t]||{},u=a.callbacks;u&&(n.forEach(function(e){var t=u[e];t&&(t.splice(t.indexOf(o),1),0===t.length&&delete u[e])}),x.isEmpty(a.callbacks)&&(delete i[t],n.forEach(function(e){r.forEach(function(n){i=c[n].sequences[e],i.splice(i.indexOf(t),1)})})))}function u(e,t,o,s){var r,i=c(t),a=e.keys,u=e.combos;n("Keyboard.on",i)||(u[t]=u[t]||{keys:i,callbacks:{}},r=u[t].callbacks,o.forEach(function(e){r[e]=r[e]||[],r[e].push(s),i.forEach(function(n){var o=a[n]=a[n]||{};o.combos=o.combos||{},o.combos[e]=o.combos[e]||[],-1===o.combos[e].indexOf(t)&&o.combos[e].push(t)})}))}function l(e,t,n,o){var s=c(t),r=e.keys,i=e.combos,a=i[t]||{},u=a.callbacks;u&&(n.forEach(function(e){var t=u[e];t&&(t.splice(t.indexOf(o),1),0===t.length&&delete u[e])}),x.isEmpty(a.callbacks)&&(delete i[t],n.forEach(function(e){s.forEach(function(n){i=r[n].combos[e],i.splice(i.indexOf(t),1)})})))}function f(e,t,o,s){var r=e.keys,c=r[t]=r[t]||{};n("Keyboard.on",[t])||o.forEach(function(e){var t=c.callbacks=c.callbacks||{};t[e]=t[e]||[],t[e].push(s)})}function h(e,t,n,o){var s=e.keys,r=s[t]||{},c=r.callbacks;c&&n.forEach(function(e){var t=c[e];t&&(t.splice(t.indexOf(o),1),0===t.length&&delete c[e])})}function p(e,t,n){var o,s,r=e.keys,c=t.keys;for(s=0;s<c.length;s++){if(o=r[c[s]],"release"===n&&(!t.pressed||"up"!==o.state))return!1;if("press"===n&&"down"!==o.state)return!1}return"press"===n?t.pressed=!0:delete t.pressed,!0}function d(e,t,n,o){var s=e.combos;t.combos&&("press"===n?(t.combos.press&&t.combos.press.forEach(function(t){var n=s[t];p(e,n,"press")&&x.executeCallbacks(n.callbacks,"press",o)}),t.combos.release&&t.combos.release.forEach(function(t){var n=s[t];p(e,n,"press")})):t.combos.release&&t.combos.release.forEach(function(t){var n=s[t];p(e,n,"release")&&x.executeCallbacks(n.callbacks,"release",o)}))}function m(e,t){var n;return e?(n=e-t,w>n):!0}function b(e,t){var n,o,s,r,c;for(r=0,c=0;r<t.length;r++,c++){for(o=t[t.length-1-r],s=e.back(c);"shift"!==o&&s&&"shift"===s.keyId;)c++,s=e.back(c);if(!s||s.keyId!==o||!m(n,s.timestamp))return!1;n=s.timestamp}return!0}function v(e,t,n,o,s){var r,c=e.sequences;t.sequences&&t.sequences[o]&&(r="press"===o?e.pressHistory:e.releaseHistory,t.sequences[o].forEach(function(e){var t=c[e];t.lastKey===n&&b(r,t.keys)&&x.executeCallbacks(t.callbacks,o,s)}))}function y(e){var t=e.charCode||e.keyCode;return K[t]}function E(e,t){var n=e[O.SHIFT];return n&&"down"===n.state?R[t]||t:t}function k(e){return function(t){var n,o=y(t),s=e.keys;o&&(o=E(s,o),n=s[o]=s[o]||{},n.state="down",e.pressHistory.push({keyId:o,timestamp:Date.now()}),x.executeCallbacks(n.callbacks,"press",t),d(e,n,"press",t),v(e,n,o,"press",t))}}function g(e){return function(t){var n,o=y(t),s=e.keys;o=E(s,o),n=s[o],n&&"down"===n.state&&(n.state="up",e.releaseHistory.push({keyId:o,timestamp:Date.now()}),x.executeCallbacks(n.callbacks,"release",t),d(e,n,"release",t),v(e,n,o,"release",t))}}function A(){this.keys={},this.combos={},this.sequences={},this.pressHistory=new L(S),this.releaseHistory=new L(S),document.addEventListener("keydown",k(this)),document.addEventListener("keyup",g(this))}var x=e("./Util"),C=e("./Keys"),O=e("./KeyEnums"),K=e("./KeyMap"),R=e("./ShiftMap"),L=e("./CircularArray"),w=800,S=64;A.prototype.on=function(e,t,n){if(x.checkFunctionArg("Keyboard.on",t))return this;e=x.normalizeInputArgs("Keyboard.on",e),n=x.normalizeEventArgs("Keyboard.on",n);var s=this;return e.forEach(function(e){o(e)?i(s,e,n,t):r(e)?u(s,e,n,t):f(s,e,n,t)}),this},A.prototype.off=function(e,t,n){if(x.checkFunctionArg("Keyboard.off",t))return this;e=x.normalizeInputArgs("Keyboard.off",e),n=x.normalizeEventArgs("Keyboard.off",n);var s=this;return e.forEach(function(e){o(e)?a(s,e,n,t):r(e)?l(s,e,n,t):h(s,e,n,t)}),this},A.prototype.poll=function(e){var t=this.keys,n={};return e=x.normalizeInputArgs("Keyboard.poll",e),e.forEach(function(e){var o=t[e];n[e]=o?o.state:"up"}),1===e.length?n[e[0]]:n},t.exports=A}()},{"./CircularArray":1,"./KeyEnums":2,"./KeyMap":3,"./Keys":5,"./ShiftMap":7,"./Util":9}],5:[function(e,t,n){!function(){"use strict";var n,o=e("./KeyMap"),s=e("./ShiftMap"),r={};for(n in o)r[o[n]]=!0;for(n in s)r[s[n]]=!0;t.exports=r}()},{"./KeyMap":3,"./ShiftMap":7}],6:[function(e,t,n){!function(){"use strict";function n(e){switch(e.button){case 0:return"left";case 1:return"middle";case 2:return"right"}}function o(e){return function(t){var o,s=n(t);o=e[s]=e[s]||{state:null},o.state="down",a.executeCallbacks(o.callbacks,"press",t)}}function s(e){return function(t){var o=n(t),s=e[o];s&&"down"===s.state&&(a.executeCallbacks(s.callbacks,"release",t),s.state="up")}}function r(e){var t=null;return function(n){t&&n.clientX===t.x&&n.clientY===t.y||(t&&(n.previousClientX=t.x,n.previousClientY=t.y),a.executeCallbacks(e.callbacks,"move",n),t={x:n.clientX,y:n.clientY})}}function c(e){return function(t){a.executeCallbacks(e.callbacks,"wheel",t)}}function i(e){this.buttons={},this.mouse={},"string"==typeof e?this.element=document.querySelector(e):this.element=e||document,this.element.addEventListener("mousedown",o(this.buttons)),this.element.addEventListener("mouseup",s(this.buttons)),this.element.addEventListener("mousemove",r(this.mouse)),this.element.addEventListener("wheel",c(this.mouse))}var a=e("./Util");i.prototype.on=function(e,t,n){if(a.checkFunctionArg("Mouse.on",t))return this;e=a.normalizeInputArgs("Mouse.on",e,["left","middle","right","move","wheel"]);var o=this.mouse,s=this.buttons;return e.forEach(function(e){if("move"===e||"wheel"===e)o.callbacks=o.callbacks||{},o.callbacks[e]=o.callbacks[e]||[],o.callbacks[e].push(t);else{var r=s[e]=s[e]||{};n=a.normalizeEventArgs("Mouse.on",n),n.forEach(function(e){r.callbacks=r.callbacks||{},r.callbacks[e]=r.callbacks[e]||[],r.callbacks[e].push(t)})}}),this},i.prototype.off=function(e,t,n){if(a.checkFunctionArg("Mouse.off",t))return this;e=a.normalizeInputArgs("Mouse.off",e,["left","middle","right","move","wheel"]);var o=this.mouse,s=this.buttons;return e.forEach(function(e){if("move"===e||"wheel"===e)o.callbacks&&o.callbacks[e]&&o.callbacks[e].splice(o.callbacks[e].indexOf(t));else{var r=s[e]=s[e]||{};n=a.normalizeEventArgs("Mouse.off",n),n.forEach(function(e){r.callbacks&&r.callbacks[e]&&r.callbacks[e].splice(r.callbacks[e].indexOf(t))})}}),this},i.prototype.poll=function(e){var t=this.buttons,n={};return e=a.normalizeInputArgs("Mouse.poll",e,["left","middle","right"]),e.forEach(function(e){var o=t[e];n[e]=o?o.state:"up"}),1===e.length?n[e[0]]:n},t.exports=i}()},{"./Util":9}],7:[function(e,t,n){!function(){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=","{":"[","}":"]","|":"\\",":":";",'"':"'","<":",",">":".","?":"/","`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}","\\":"|",";":":","":'"',",":"<",".":">","/":"?"}}()},{}],8:[function(e,t,n){!function(){"use strict";function n(e,t){return function(n){e[t]=e[t]||{type:t,callbacks:[]},e[t].callbacks.forEach(function(e){e(n)})}}function o(){this.touch={},document.addEventListener("touchstart",n(this.touch,"start"),!1),document.addEventListener("touchend",n(this.touch,"end"),!1),document.addEventListener("touchcancel",n(this.touch,"cancel"),!1),document.addEventListener("touchleave",n(this.touch,"leave"),!1),document.addEventListener("touchmove",n(this.touch,"move"),!1)}var s=e("./Util");o.prototype.on=function(e,t){var n,o,r;if(s.checkFunctionArg("Touch.on",t))return this;for(e=s.normalizeInputArgs("Touch.on",e,["start","end","cancel","leave","move"]),r=0;r<e.length;r++)o=e[r],n=this.touch,n[o]=n[o]||{type:o,callbacks:[]},n[o].callbacks.push(t);return this},o.prototype.off=function(e,t){var n,o,r,c;if(s.checkFunctionArg("Touch.off",t))return this;for(e=s.normalizeInputArgs("Touch.off",e,["start","end","cancel","leave","move"]),c=0;c<e.length;c++)r=e[c],n=this.touch,o=n[r].callbacks.indexOf(t),n[r]&&n[r].callbacks.splice(o,1);return this},t.exports=o}()},{"./Util":9}],9:[function(e,t,n){!function(){"use strict";t.exports={normalizeString:function(e){return e=e.toLowerCase(),e.replace(/[\s]/g," ")},checkFunctionArg:function(e,t){return"function"!=typeof t?(console.log("Argument 'callback' to '"+e+"' is not of type 'function', command ignored."),!0):!1},normalizeInputArgs:function(e,t,n){var o=this,s=[];return t instanceof Array||(t=[t]),t.forEach(function(t){return"string"!=typeof t?void console.log("Argument '"+t+"' to '"+e+"' is not of type 'string', argument removed."):n&&-1===n.indexOf(t)?void console.log("Argument '"+t+"' to '"+e+"' is not a recognized input type, argument removed."):void s.push(o.normalizeString(t))}),s},normalizeEventArgs:function(e,t){var n=this,o=[];return t||(t=["press"]),t instanceof Array||(t=[t]),t.forEach(function(t){"press"!==t&&"release"!==t?console.log("Argument '"+t+"' to '"+e+"' is not a recognized event type, argument removed."):o.push(n.normalizeString(t))}),o},executeCallbacks:function(e,t,n){e&&e[t]&&e[t].forEach(function(e){e(n)})},mod:function(e,t){return(e%t+t)%t},isEmpty:function(e){return 0===Object.keys(e).length}}}()},{}],10:[function(e,t,n){!function(){"use strict";t.exports={Keyboard:e("./Keyboard"),Mouse:e("./Mouse"),Touch:e("./Touch")}}()},{"./Keyboard":4,"./Mouse":6,"./Touch":8}]},{},[10])(10)});