!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.rolypoly=e()}}(function(){return function e(t,n,s){function o(c,i){if(!n[c]){if(!t[c]){var l="function"==typeof require&&require;if(!i&&l)return l(c,!0);if(r)return r(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var u=n[c]={exports:{}};t[c][0].call(u.exports,function(e){var n=t[c][1][e];return o(n?n:e)},u,u.exports,e,t,n,s)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(e,t){!function(){"use strict";t.exports={Keyboard:e("./Keyboard"),Mouse:e("./Mouse")}}()},{"./Keyboard":4,"./Mouse":6}],2:[function(e,t){!function(){"use strict";function e(e,t){return(e%t+t)%t}function n(e){this.buffer=new Array(e),this.length=e,this.index=0}n.prototype.push=function(e){this.buffer[this.index]=e,this.index=(this.index+1)%this.length},n.prototype.back=function(t){return this.buffer[e(this.index-1-t,this.length)]},t.exports=n}()},{}],3:[function(e,t){!function(){"use strict";var n=e("./Keys");t.exports={8:n.BACKSPACE,9:n.TAB,13:n.ENTER,16:n.SHIFT,17:n.CTRL,18:n.ALT,19:n.PAUSE_BREAK,20:n.CAPS_LOCK,27:n.ESC,32:n.SPACE_BAR,33:n.PAGE_UP,34:n.PAGE_DOWN,35:n.END,36:n.HOME,37:n.LEFT_ARROW,38:n.UP_ARROW,39:n.RIGHT_ARROW,40:n.DOWN_ARROW,44:n.PRINT_SCREEN,45:n.INSERT,46:n.DELETE,48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:n.WINDOWS,92:n.WINDOWS,93:n.SELECT,96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:n.NUM_LOCK,145:n.SCROLL_LOCK,186:":",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}}()},{"./Keys":5}],4:[function(e,t){!function(){"use strict";function n(e,t){var n,s=[];for(t instanceof Array||(t=[t]),n=0;n<t.length;n++)"string"!=typeof t[n]?console.log("Argument 'input' to '"+e+"' is not of type 'string', argument removed."):s.push(A.normalizeString(t[n]));return s}function s(e,t){var n;for(t||(t=["press"]),t instanceof Array||(t=[t]),n=0;n<t.length;n++)"press"!==t[n]&&"release"!==t[n]?console.log("Argument 'events' to '"+e+"' does not match 'press' or 'release', argument removed."):t[n]=A.normalizeString(t[n]);return t}function o(e){return e.length>1?e.split(" "):[e]}function r(e){return e.length>1?e.split("+"):[e]}function c(e,t,n,s){var r,c,i,l,a=o(t),u=e.keys,f=e.sequences;for(f[t]=f[t]||{keys:a,lastKey:a[a.length-1],callbacks:{}},r=f[t],l=0;l<n.length;l++)for(c=n[l],r.callbacks[c]=r.callbacks[c]||[],r.callbacks[c].push(s),l=0;l<a.length;l++)i=a[l],u[i]=u[i]||{},u[i].sequences=u[i].sequences||{},u[i].sequences[c]=u[i].sequences[c]||[],-1===u[i].sequences[c].indexOf(t)&&u[i].sequences[c].push(t)}function i(e,t,n,s){var r,c,i,l,a=o(t),u=e.keys,f=e.sequences,h=f[t];if(h){for(l=0;l<n.length;l++)c=n[l],r=h.callbacks,r&&r[c]&&(r[c].splice(r[c].indexOf(s),1),0===r[c].length&&delete r[c]);if(A.isEmpty(h.callbacks))for(delete f[t],l=0;l<n.length;l++)for(c=n[l],l=0;l<a.length;l++)i=a[l],f=u[i].sequences[c],f.splice(f.indexOf(t),1)}}function l(e,t,n,s){var o,c,i,l,a=r(t),u=e.keys,f=e.combos;for(f[t]=f[t]||{keys:a,callbacks:{}},o=f[t],l=0;l<n.length;l++)for(c=n[l],o.callbacks[c]=o.callbacks[c]||[],o.callbacks[c].push(s),l=0;l<a.length;l++)i=a[l],u[i]=u[i]||{},u[i].combos=u[i].combos||{},u[i].combos[c]=u[i].combos[c]||[],u[i].combos[c].push(t),-1===u[i].combos[c].indexOf(t)&&u[i].combos[c].push(t)}function a(e,t,n,s){var o,c,i,l,a=r(t),u=e.keys,f=e.combos,h=f[t];if(h){for(l=0;l<n.length;l++)c=n[l],o=h.callbacks,o&&o[c]&&(o[c].splice(o[c].indexOf(s),1),0===o[c].length&&delete o[c]);if(A.isEmpty(h.callbacks))for(delete f[t],l=0;l<n.length;l++)for(c=n[l],l=0;l<a.length;l++)i=a[l],f=u[i].combos[c],f.splice(f.indexOf(t),1)}}function u(e,t,n,s){var o,r,c=e.keys,i=c[t]=c[t]||{};for(r=0;r<n.length;r++)o=n[r],i.callbacks=i.callbacks||{},i.callbacks[o]=i.callbacks[o]||[],i.callbacks[o].push(s)}function f(e,t,n,s){var o,r,c,i=e.keys,l=i[t];if(l)for(c=0;c<n.length;c++)r=n[c],o=l.callbacks,o&&o[r]&&(o[r].splice(o[r].indexOf(s),1),0===o[r].length&&delete o[r])}function h(e,t,n){var s,o,r=e.keys,c=t.keys;for(o=0;o<c.length;o++){if(s=r[c[o]],!s)return!1;if("release"===n&&(!t.pressed||"up"!==s.state))return!1;if("press"===n&&"down"!==s.state)return!1}return"press"===n?t.pressed=!0:"release"===n&&delete t.pressed,!0}function p(e,t,n,s){var o,r,c=e.combos;if(t.combos&&t.combos[n])for(r=0;r<t.combos[n].length;r++)o=c[t.combos[n][r]],o&&h(e,o,n)&&A.executeCallbacks(o.callbacks,n,s)}function d(e,t){var n;return e?(n=e-t,S>n):!0}function b(e,t){var n,s,o,r,c;for(r=0,c=0;r<t.length;r++,c++){for(s=t[t.length-1-r],o=e.back(c);"shift"!==s&&o&&"shift"===o.keyId;)c++,o=e.back(c);if(!o||o.keyId!==s||!d(n,o.timestamp))return!1;n=o.timestamp}return!0}function k(e,t,n,s,o){var r,c,i,l=e.sequences;if(t.sequences&&t.sequences[s])for(c="press"===s?e.pressHistory:e.releaseHistory,i=0;i<t.sequences[s].length;i++)r=l[t.sequences[s][i]],r.lastKey===n&&b(c,r.keys)&&A.executeCallbacks(r.callbacks,s,o)}function g(e){var t=e.charCode||e.keyCode;return C[t]||t}function y(e,t){var n=e[x.SHIFT];return n&&"down"===n.state?O[t]||t:t}function m(e){return function(t){var n,s=g(t),o=e.keys;s=y(o,s),n=o[s]=o[s]||{},n.state="down",e.pressHistory.push({keyId:s,timestamp:Date.now()}),A.executeCallbacks(n.callbacks,"press",t),p(e,n,"press",t),k(e,n,s,"press",t)}}function v(e){return function(t){var n,s=g(t),o=e.keys;s=y(o,s),n=o[s],n&&"down"===n.state&&(n.state="up",e.releaseHistory.push({keyId:s,timestamp:Date.now()}),A.executeCallbacks(n.callbacks,"release",t),p(e,n,"release",t),k(e,n,s,"release",t))}}function E(){this.keys={},this.combos={},this.sequences={},this.pressHistory=new R(64),this.releaseHistory=new R(64),document.addEventListener("keydown",m(this)),document.addEventListener("keyup",v(this))}var A=e("./Util"),x=e("./Keys"),C=e("./KeyMap"),O=e("./ShiftMap"),R=e("./CircularArray"),S=800;E.prototype.on=function(e,t,i){var a,f;if(A.checkFunctionArg("Keyboard.on",t))return this;for(e=n("Keyboard.on",e),i=s("Keyboard.on",i),f=0;f<e.length;f++)a=e[f],o(a).length>1?c(this,a,i,t):r(a).length>1?l(this,a,i,t):u(this,a,i,t);return this},E.prototype.off=function(e,t,c){var l,u;if(A.checkFunctionArg("Keyboard.off",t))return this;for(e=n("Keyboard.off",e),c=s("Keyboard.off",c),u=0;u<e.length;u++)l=e[u],o(l).length>1?i(this,l,c,t):r(l).length>1?a(this,l,c,t):f(this,l,c,t);return this},E.prototype.poll=function(e){var t,s,o=[];for(e=n("Keyboard.poll",e),s=0;s<e.length;s++)t=this.keys[e[s]],o.push(t?t.state:"up");return 1===o.length?o[0]:o},t.exports=E}()},{"./CircularArray":2,"./KeyMap":3,"./Keys":5,"./ShiftMap":7,"./Util":8}],5:[function(e,t){!function(){"use strict";t.exports={BACKSPACE:"backspace",TAB:"tab",ENTER:"enter",SHIFT:"shift",CTRL:"ctrl",ALT:"alt",PAUSE_BREAK:"pausebreak",CAPS_LOCK:"capslock",ESC:"esc",PAGE_UP:"pageup",PAGE_DOWN:"pagedown",END:"end",HOME:"home",LEFT_ARROW:"left",UP_ARROW:"up",RIGHT_ARROW:"right",DOWN_ARROW:"down",PRINT_SCREEN:"printscreen",INSERT:"insert",DELETE:"delete",WINDOWS:"windows",SELECT:"select",SPACE_BAR:"space",NUM_LOCK:"numlock",SCROLL_LOCK:"scrolllock"}}()},{}],6:[function(e,t){!function(){"use strict";function n(e,t){var n,s=[];for(t instanceof Array||(t=[t]),n=0;n<t.length;n++)"left"!==t[n]&&"middle"!==t[n]&&"right"!==t[n]&&"move"!==t[n]?console.log("Argument 'input' to '"+e+"' does not match 'left', 'middle', 'right', or 'move', argument removed."):s.push(a.normalizeString(t[n]));return s}function s(e,t){var n;for(t||(t=["press"]),t instanceof Array||(t=[t]),n=0;n<t.length;n++)"press"!==t[n]&&"release"!==t[n]?console.log("Argument 'events' to '"+e+"' does not match 'press', 'release', argument removed."):t[n]=a.normalizeString(t[n]);return t}function o(e){switch(e.button){case 0:return"left";case 1:return"middle";case 2:return"right"}}function r(e){return function(t){var n,s=o(t);n=e[s]=e[s]||{state:null},n.state="down",a.executeCallbacks(n.callbacks,"press",t)}}function c(e){return function(t){var n=o(t),s=e[n];s&&"down"===s.state&&(a.executeCallbacks(s.callbacks,"release",t),s.state="up")}}function i(e){var t=null;return function(n){t&&n.clientX===t.x&&n.clientY===t.y||(t&&(n.previousClientX=t.x,n.previousClientY=t.y),a.executeCallbacks(e.callbacks,"move",n),t={x:n.clientX,y:n.clientY})}}function l(){this.buttons={},this.mouse={},document.addEventListener("mousedown",r(this.buttons)),document.addEventListener("mouseup",c(this.buttons)),document.addEventListener("mousemove",i(this.mouse))}var a=e("./Util");l.prototype.on=function(e,t,o){var r,c,i,l,u,f;if(a.checkFunctionArg("Keyboard.on",t))return this;for(e=n("Mouse.on",e),o=s("Mouse.on",o),u=0;u<e.length;u++)if(l=e[u],"move"===l)c=this.mouse,c.callbacks=c.callbacks||{},c.callbacks.move=c.callbacks.move||[],c.callbacks.move.push(t);else for(r=this.buttons[l]=this.buttons[l]||{},f=0;f<o.length;f++)i=o[f],r.callbacks=r.callbacks||{},r.callbacks[i]=r.callbacks[i]||[],r.callbacks[i].push(t);return this},l.prototype.off=function(e,t,o){var r,c,i,l,u,f;if(a.checkFunctionArg("Keyboard.off",t))return this;for(e=n("Mouse.off",e),o=s("Mouse.off",o),u=0;u<e.length;u++)if(l=e[u],"move"===l)c=this.mouse,c.callbacks&&c.callbacks.move&&c.callbacks.move.splice(c.callbacks.move.indexOf(t));else for(r=this.buttons[l]=this.buttons[l]||{},f=0;f<o.length;f++)i=o[f],r.callbacks&&r.callbacks[i]&&r.callbacks[i].splice(r.callbacks[i].indexOf(t));return this},l.prototype.poll=function(e){var t,s,o=[];for(e=n("Mouse.poll",e),s=0;s<e.length;s++)t=this.buttons[e[s]],o.push(t?t.state:"up");return 1===o.length?o[0]:o},t.exports=l}()},{"./Util":8}],7:[function(e,t){!function(){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=","{":"[","}":"]","|":"\\",":":";",'"':"'","<":",",">":".","?":"/","`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+","[":"{","]":"}","\\":"|",";":":","":'"',",":"<",".":">","/":"?"}}()},{}],8:[function(e,t){!function(){"use strict";t.exports={normalizeString:function(e){return e=e.toLowerCase(),e=e.length>1?e.replace(/[_-]/g,""):e,e.replace(/[\s]/g," ")},checkFunctionArg:function(e,t){return"function"!=typeof t?(console.log("Argument 'callback' to '"+e+"' is not of type 'function', command ignored."),!0):!1},executeCallbacks:function(e,t,n){var s;if(e&&e[t])for(e=e[t],s=0;s<e.length;s++)e[s](n)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}}()},{}]},{},[1])(1)});